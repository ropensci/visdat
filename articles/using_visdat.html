<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="visdat">
<title>Using visdat • visdat</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using visdat">
<meta property="og:description" content="visdat">
<meta property="og:image" content="http://ropensci.github.io/visdat/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">visdat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/using_visdat.html">Using visdat</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/customising-colour-palettes.html">Customising colour palettes in visdat</a>
    <a class="dropdown-item" href="../articles/using_visdat.html">Using visdat</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/visdat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="using_visdat_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using visdat</h1>
                        <h4 data-toc-skip class="author">Nicholas Tierney</h4>
            
            <h4 data-toc-skip class="date">2023-02-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/visdat/blob/HEAD/vignettes/using_visdat.Rmd" class="external-link"><code>vignettes/using_visdat.Rmd</code></a></small>
      <div class="d-none name"><code>using_visdat.Rmd</code></div>
    </div>

    
    
<p>When you get a new data set, you need to look at the data to get a sense of what it contains and potential problems with it. That’s a key phrase here “looking at the data” - what does that mean?</p>
<p>On the one hand, you can look at the head of the data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">## 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span><span class="co">## 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span><span class="co">## 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span><span class="co">## 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span><span class="co">## 5          5.0         3.6          1.4         0.2  setosa</span></span>
<span><span class="co">## 6          5.4         3.9          1.7         0.4  setosa</span></span></code></pre>
<p>Or you can have a <code>glimpse</code> at it through <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">dplyr::glimpse</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 150</span></span>
<span><span class="co">## Columns: 5</span></span>
<span><span class="co">## $ Sepal.Length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.…</span></span>
<span><span class="co">## $ Sepal.Width  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.…</span></span>
<span><span class="co">## $ Petal.Length <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.…</span></span>
<span><span class="co">## $ Petal.Width  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0.2, 0.…</span></span>
<span><span class="co">## $ Species      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> setosa, setosa, setosa, setosa, setosa, setosa, setosa, s…</span></span></code></pre>
<p>Here we see that we have doubles, and a factor. We get some insight into the data.</p>
<p>But we don’t always have data like the canonical iris dataset. let’s take a look at some data that might be a bit more typical of “messy” data using the <code>typical_data</code> dataset from the <code>visdat</code> package.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/visdat/" class="external-link">visdat</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">typical_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 5,000</span></span>
<span><span class="co">## Columns: 9</span></span>
<span><span class="co">## $ ID           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0001", "0002", "0003", "0004", "0005", "0006", "0007", "…</span></span>
<span><span class="co">## $ Race         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Black, Black, Black, Hispanic, NA, White, White, Black, W…</span></span>
<span><span class="co">## $ Age          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, "25", "31", "27", "21", "22", "23", "21", NA, "27", "…</span></span>
<span><span class="co">## $ Sex          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Male, Male, Female, Female, Female, Female, Female, Femal…</span></span>
<span><span class="co">## $ `Height(cm)` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 175.9, 171.7, 173.5, 172.4, 158.5, 169.5, 163.7, 165.8, 1…</span></span>
<span><span class="co">## $ IQ           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 110, 84, 115, 84, 116, 83, 101, 97, 92, 99, 88, 86, NA, 9…</span></span>
<span><span class="co">## $ Smokes       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FA…</span></span>
<span><span class="co">## $ Income       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 4334.29, 16682.37, 50402.01, 91442.86, 75266.05, 12209.71…</span></span>
<span><span class="co">## $ Died         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TR…</span></span></code></pre>
<p>Looking at this, you might then ask:</p>
<blockquote>
<p>Isn’t it odd that Income is a factor? And Age is a character?</p>
</blockquote>
<p>And you might start to wonder what else is different, what else changed?</p>
<p>And it might be a bit unclear where to go from there. Do you plot the data? Why does my plot look weird? What are these other strange features in the data? The <code>visdat</code> package provides visualisations of an entire dataframe at once. Initially inspired by <a href="https://github.com/setosa/csv-fingerprint" class="external-link"><code>csv-fingerprint</code></a>, <code>visdat</code> provides tools to create heatmap-like visualisations of an entire dataframe. <code>visdat</code> provides 2 main functions: <code>vis_dat</code> and <code>vis_miss</code>.</p>
<p><code><a href="../reference/vis_dat.html">vis_dat()</a></code> helps explore the data class structure and missingness:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">typical_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/load-data-1.png" width="480"></p>
<p>And the <code>vis_miss</code> function provides a custom plot for missing data.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">typical_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/example-vis-miss-1.png" width="480"></p>
<p>The name <code>visdat</code> was chosen as it borrows from the idea of <a href="https://github.com/karthik/testdat" class="external-link"><code>testdat</code></a>, which provides unit testing for your data. In a similar way, <code>visdat</code> provides visual tests, the idea being that first you visualise your data (<code>visdat</code>), then you run tests from <code>testdat</code>, or a package like <code>assertr</code>, to fix these errors.</p>
<div class="section level3">
<h3 id="vis_dat">
<code>vis_dat</code><a class="anchor" aria-label="anchor" href="#vis_dat"></a>
</h3>
<p>Let’s see what’s inside the dataset <code>airquality</code>, which contains information about daily air quality measurements in New York from May to September 1973. More information about the dataset can be found with <code><a href="https://rdrr.io/r/datasets/airquality.html" class="external-link">?airquality</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_dat-1.png" width="480"> The plot above tells us that R reads this dataset as having numeric and integer values, with some missing data in <code>Ozone</code> and <code>Solar.R</code>. The classes are represented on the legend, and missing data represented by grey. The column/variable names are listed on the x axis.</p>
<p>By default, <code>vis_dat</code> sorts the columns according to the type of the data in the vectors. You can turn this off by setting <code>sort_type = FALSE</code>. This feature is better illustrated using the <code>typical_data</code> dataset, created using <a href="https://github.com/trinker/wakefield" class="external-link">wakefield</a> and contained within <code>visdat</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">typical_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/visdat-typical-1.png" width="480"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">typical_data</span>, </span>
<span>        sort_type <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/visdat-typical-2.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="vis_miss">
<code>vis_miss</code><a class="anchor" aria-label="anchor" href="#vis_miss"></a>
</h3>
<p>We can explore the missing data further using <code>vis_miss</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_miss-1.png" width="480"></p>
<p>Notice that the percentages of missingness are provided in the data. These are accurate to 1 decimal place. <code>vis_miss</code> indicates when there is a very small amount of missing data at &lt;0.1% missingness.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10000</span>,</span>
<span>                      x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>                      x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">9999</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">df_test</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vismiss-new-data-1.png" width="480"></p>
<p><code>vis_miss</code> will also indicate when there is no missing data at all.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10000</span>,</span>
<span>                      x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"tidy"</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>                      x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="fl">10000</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">df_test</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vismiss-mtcars-1.png" width="480"></p>
<p>Columns can be arranged by columns with most missingness, by setting <code>sort_miss = TRUE</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">airquality</span>,</span>
<span>         sort_miss <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vismiss-1.png" width="480"></p>
<p>And missingness can be clustered by setting <code>cluster = TRUE</code></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">airquality</span>, </span>
<span>         cluster <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis_miss-cluster-1.png" width="480"></p>
<p>To further explore the missingness structure in a dataset, I recommend the <a href="https://github.com/njtierney/naniar" class="external-link"><code>naniar</code></a> package, which provides more general tools for graphical and numerical exploration of missing values.</p>
</div>
<div class="section level3">
<h3 id="vis_compare">
<code>vis_compare</code><a class="anchor" aria-label="anchor" href="#vis_compare"></a>
</h3>
<p>Sometimes you want to see what has changed in your data. <code><a href="../reference/vis_compare.html">vis_compare()</a></code> displays the differences in two dataframes of the same size. Let’s look at an example.</p>
<p>Let’s make some changes to the <code>chickwts</code>, and compare this new dataset.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">04</span><span class="op">-</span><span class="fl">03</span><span class="op">-</span><span class="fl">1107</span><span class="op">)</span></span>
<span><span class="va">chickwts_diff</span> <span class="op">&lt;-</span> <span class="va">chickwts</span></span>
<span><span class="va">chickwts_diff</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">chickwts</span><span class="op">)</span>, <span class="fl">30</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">chickwts</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="fu"><a href="../reference/vis_compare.html">vis_compare</a></span><span class="op">(</span><span class="va">chickwts_diff</span>, <span class="va">chickwts</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-compare-iris-1.png" width="480"></p>
<p>Here the differences are marked in blue.</p>
<p>If you try and compare differences when the dimensions are different, you get an ugly error.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chickwts_diff_2</span> <span class="op">&lt;-</span> <span class="va">chickwts</span></span>
<span><span class="va">chickwts_diff_2</span><span class="op">$</span><span class="va">new_col</span> <span class="op">&lt;-</span> <span class="va">chickwts_diff_2</span><span class="op">$</span><span class="va">weight</span><span class="op">*</span><span class="fl">2</span></span>
<span></span>
<span><span class="fu"><a href="../reference/vis_compare.html">vis_compare</a></span><span class="op">(</span><span class="va">chickwts</span>, <span class="va">chickwts_diff_2</span><span class="op">)</span></span>
<span><span class="co"># Error in vis_compare(chickwts, chickwts_diff_2) : </span></span>
<span><span class="co">#   Dimensions of df1 and df2 are not the same. vis_compare requires dataframes of identical dimensions.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="vis_expect">
<code>vis_expect</code><a class="anchor" aria-label="anchor" href="#vis_expect"></a>
</h3>
<p><code>vis_expect</code> visualises certain conditions or values in your data. For example, If you are not sure whether to expect values greater than 25 in your data (airquality), you could write: <code>vis_expect(airquality, ~.x &gt;= 25)</code>, and you can see if there are times where the values in your data are greater than or equal to 25.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_expect.html">vis_expect</a></span><span class="op">(</span><span class="va">airquality</span>, <span class="op">~</span><span class="va">.x</span> <span class="op">&gt;=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-expect-1.png" width="480"></p>
<p>This shows the proportion of times that there are values greater than 25, as well as the missings.</p>
<p>You could also, for example, explore a set of bad strings, or possible NA values and visualise where they are using <code>vis_expect(data, ~.x %in% bad_strings)</code> where <code>bad_strings</code> is a character vector containing bad strings like <code>N A</code>, <code>N/A</code> etc.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bad_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"N/A"</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"N A "</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/vis_expect.html">vis_expect</a></span><span class="op">(</span><span class="va">bad_data</span>, <span class="op">~</span><span class="va">.x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N/A"</span>, <span class="st">"N A "</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-expect-bad-strings-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="vis_cor">
<code>vis_cor</code><a class="anchor" aria-label="anchor" href="#vis_cor"></a>
</h3>
<p>To make it easy to plot correlations of your data, use <code>vis_cor</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_cor.html">vis_cor</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-cor-1.png" width="480"></p>
<p>Under the hood, <code>vis_cor</code> is powered by the <code>cor</code> function in base R, and takes a character string indicating which correlation coefficient (or covariance) is to be computed. One of “pearson” (default), “kendall”, or “spearman”.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_cor.html">vis_cor</a></span><span class="op">(</span><span class="va">airquality</span>, cor_method <span class="op">=</span> <span class="st">"spearman"</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-cor-spearman-1.png" width="480"></p>
<p>You can also specify what to do for the missing data using the <code>na_action</code> function, which again borrows from the <code>cor</code> methods. This can be “everything”, “all.obs”, “complete.obs”, “na.or.complete”, or “pairwise.complete.obs” (default), e.g.:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_cor.html">vis_cor</a></span><span class="op">(</span><span class="va">airquality</span>,</span>
<span>        na_action <span class="op">=</span> <span class="st">"complete.obs"</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-cor-na-action-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="vis_value">
<code>vis_value</code><a class="anchor" aria-label="anchor" href="#vis_value"></a>
</h3>
<p><code><a href="../reference/vis_value.html">vis_value()</a></code> visualises the values of your data on a 0 to 1 scale.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_value.html">vis_value</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-value-1.png" width="480"></p>
<p>It only works on numeric data:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_value.html">vis_value</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code>data input can only contain numeric values, please subset the data to the numeric values you would like. dplyr::select_if(data, is.numeric) can be helpful here!</code></pre>
<p>So you might need to subset the data beforehand like so:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/vis_value.html">vis_value</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/diamonds-error-subset-1.png" width="480"></p>
<p>It can be useful to arrange your data before using <code>vis_value</code> to explore possible relationships in the data:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">airquality</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">Wind</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/vis_value.html">vis_value</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/airquality-arrange-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="vis_binary">
<code>vis_binary</code><a class="anchor" aria-label="anchor" href="#vis_binary"></a>
</h3>
<p><code><a href="../reference/vis_binary.html">vis_binary()</a></code> visualises the occurrence of binary values in your data. It is similar to <code><a href="../reference/vis_value.html">vis_value()</a></code> except it just focusses on values that are NA, 0, and 1.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_binary.html">vis_binary</a></span><span class="op">(</span><span class="va">dat_bin</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-binary-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="vis_guess">
<code>vis_guess</code><a class="anchor" aria-label="anchor" href="#vis_guess"></a>
</h3>
<p><code><a href="../reference/vis_guess.html">vis_guess()</a></code> takes a guess at what each cell is. It’s best illustrated using some messy data, which we’ll make here.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,</span>
<span>                  <span class="cn">T</span>,</span>
<span>                  <span class="st">"TRUE"</span>,</span>
<span>                  <span class="st">"T"</span>,</span>
<span>                  <span class="st">"01/01/01"</span>,</span>
<span>                  <span class="st">"01/01/2001"</span>,</span>
<span>                  <span class="cn">NA</span>,</span>
<span>                  <span class="cn">NaN</span>,</span>
<span>                  <span class="st">"NA"</span>,</span>
<span>                  <span class="st">"Na"</span>,</span>
<span>                  <span class="st">"na"</span>,</span>
<span>                  <span class="st">"10"</span>,</span>
<span>                  <span class="fl">10</span>,</span>
<span>                  <span class="st">"10.1"</span>,</span>
<span>                  <span class="fl">10.1</span>,</span>
<span>                  <span class="st">"abc"</span>,</span>
<span>                  <span class="st">"$%TG"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1114</span><span class="op">)</span></span>
<span><span class="va">messy_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>var1 <span class="op">=</span> <span class="va">messy_vector</span>,</span>
<span>                       var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">messy_vector</span><span class="op">)</span>,</span>
<span>                       var3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">messy_vector</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vis_guess.html">vis_guess</a></span><span class="op">(</span><span class="va">messy_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">messy_df</span><span class="op">)</span></span></code></pre></div>
<p><img src="using_visdat_files/figure-html/vis-guess-messy-df-1.png" width="50%"><img src="using_visdat_files/figure-html/vis-guess-messy-df-2.png" width="50%"></p>
<p>So here we see that there are many different kinds of data in your dataframe. As an analyst this might be a depressing finding. We can see this comparison above.</p>
<p>Here, you might just assume your data is weird because it’s all factors - or worse, not notice that this is a problem.</p>
<p>At the moment <code>vis_guess</code> is very slow. Please take this into consideration when you are using it on data with more than 1000 rows. We’re looking into ways of making it faster, potentially using methods from the <code>parallel</code> package, or extending the c++ code from <code>readr:::collectorGuess</code>.</p>
</div>
<div class="section level2">
<h2 id="interactivity">Interactivity<a class="anchor" aria-label="anchor" href="#interactivity"></a>
</h2>
<p>You can make the plots in visdat by wrapping them in <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">plotly::ggplotly</a></code>:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">ggplotly</a></span><span class="op">(</span><span class="fu"><a href="../reference/vis_dat.html">vis_dat</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">ggplotly</a></span><span class="op">(</span><span class="fu"><a href="../reference/vis_miss.html">vis_miss</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">ggplotly</a></span><span class="op">(</span><span class="fu"><a href="../reference/vis_guess.html">vis_guess</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>In the future these will have their own functions, written in plotly with nice standardised on-hover behaviour. If you would like to see how these work, please see the <a href="https://github.com/ropensci/visdat" class="external-link">development version on GitHub</a>.</p>
</div>
<div class="section level2">
<h2 id="future-work">Future work<a class="anchor" aria-label="anchor" href="#future-work"></a>
</h2>
<p>Future work from here is focussed on making <code>visdat</code> more stable, improving the speed of plotting, and adding interactive versions for each function.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://twitter.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-twitter"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
